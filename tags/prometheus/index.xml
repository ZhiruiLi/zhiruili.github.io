<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Prometheus on 简单易懂的现代魔法 - Zhirui Li</title><link>https://zhiruili.github.io/tags/prometheus/</link><description>Recent content in Prometheus on 简单易懂的现代魔法 - Zhirui Li</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 02 Oct 2020 00:00:00 +0000</lastBuildDate><atom:link href="https://zhiruili.github.io/tags/prometheus/index.xml" rel="self" type="application/rss+xml"/><item><title>Prometheus 上报和查询</title><link>https://zhiruili.github.io/posts/prometheus-report-query/</link><pubDate>Fri, 02 Oct 2020 00:00:00 +0000</pubDate><guid>https://zhiruili.github.io/posts/prometheus-report-query/</guid><description>基本概念 采样样本 Prometheus 会定期去对数据进行采集，每一次采集的结果都是一次采样的样本（sample），这些数据会被存储为时间序列，也就是带有时间戳的 value stream，这些 value stream 归属于自己的监控指标。
这里采集样本包括了三部分：
监控指标（metric） 毫秒时间戳（timestamp） 样本的值（value） 监控指标 一个监控指标被表示为下面的格式：
metric_name { label_name_1=label_value_1, label_name_2=label_value_2, ... } 这里的 metric_name 用于指明监控的内容，label_value_x 则用于声明这个监控内容中不同维度的值。用我们常见的二维坐标系举例，下面有一个二维坐标系，名称为「xxx 坐标系」，其中，有 X，Y 两个轴，上面有两个点，分别是 A 和 B，它们的坐标分别为 (1, 3) 和 (2, 1)：
xxx坐标系 Y ^ │ . A (1, 3) │ │ . B (2, 1) v &amp;lt;-----------------&amp;gt; X 对应于 Prometheus，这里的 metric_name 就是 「xxx 坐标系」，label_name_1 就是 X，label_name_2 就是 Y。需要注意的是，这里的 A 和 B 两个点并不代表采样点，而是监控指标。我们可以想象在这个图中还存在一条虚拟的时间轴，分别从 A B 两点从屏幕外垂直屏幕进去，在这两条虚拟的时间轴上，每一个点就是一个采样点，采样点上会带一个毫秒时间戳和一个值，这个值就是样本的值。在 Prometheus 中，样本的值必须为 float64 类型的值。</description></item></channel></rss>